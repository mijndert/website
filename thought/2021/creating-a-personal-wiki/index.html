<!doctype html><html lang=en><head><title>Creating a personal wiki - Mijndert Stuij</title><meta charset=utf-8><meta name=description content="Creating a personal wiki that runs on GitHub pages using mdBook."><meta name=google-site-verification content="saUIHjzun9dAGQ4-YTEb0W_vLiFRM1sEiHZXPCCOmyc"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=apple-mobile-web-app-title content="Mijndert Stuij"><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><link rel=canonical href=https://mijndertstuij.nl/thought/2021/creating-a-personal-wiki/><link rel=stylesheet href=/css/main.css><link rel=stylesheet href=/css/syntax.css><link rel="shortcut icon" href=/favicon.ico></head><body><header class=bio><a href=https://mijndertstuij.nl>back</a></header><article><header class=header><h1>Creating a personal wiki</h1><div><time>JUN 14, 2021</time></div></header><p>Every since I came across the term Digital/Second Brain it kind of stuck in my head, pun intended. I value an open internet where information is freely available for everyone. I want to share all of the knowledge that I gather through my work with the world, hoping someone gets some amount of value from it. If nothing else, at least it serves as a sort of time capsule - a view into my brain at any given time.</p><blockquote><p>Information should be free, both as in beer and as in freedom.</p></blockquote><p>To start gathering some information and dumping everything that I know into digital files I started using <a href=https://obsidian.md/>Obsidian</a>. It&rsquo;s a nice tool but very hard to put online for everyone to see. I started looking for alternatives and found <a href=https://github.com/rust-lang/mdBook>mdBook</a> still alive and kicking.</p><p>I now host <a href=https://wiki.mijndertstuij.nl/>my personal wiki</a> for free on GitHub pages so it&rsquo;s very easy to update, portable and I can view everything offline as well.</p><h2 id=setup>Setup</h2><p>Because I want to be able to just run mdBook everywhere I created a <a href=https://github.com/mijndert/wiki/blob/main/Dockerfile>Dockerfile</a>. The Dockerfile spits out an image approximitly 750MB in size (I&rsquo;m pretty sure I can bring that down a little).</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> rust:slim</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>ARG</span> MDBOOK_VERSION<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;0.4.10&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> cargo install mdbook --vers <span style=color:#e6db74>${</span>MDBOOK_VERSION<span style=color:#e6db74>}</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>WORKDIR</span><span style=color:#e6db74> /data</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>VOLUME</span> [<span style=color:#e6db74>&#34;/data&#34;</span>]<span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>A <code>Makefile</code> ensures I don&rsquo;t have to remember a bunch of commands:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile>SHELL <span style=color:#f92672>:=</span> bash
<span style=color:#a6e22e>.PHONY</span><span style=color:#f92672>:</span> build serve stop

<span style=color:#a6e22e>build</span><span style=color:#f92672>:</span>
  docker build -t mdbook .

<span style=color:#a6e22e>serve</span><span style=color:#f92672>:</span>
  docker run -d --name mdbook --rm -p 3000:3000 -v <span style=color:#66d9ef>$(</span>PWD<span style=color:#66d9ef>)</span>:/data -u <span style=color:#66d9ef>$(</span>id -u<span style=color:#66d9ef>)</span>:<span style=color:#66d9ef>$(</span>id -g<span style=color:#66d9ef>)</span> -it mdbook mdbook serve -p <span style=color:#ae81ff>3000</span> -n 0.0.0.0

<span style=color:#a6e22e>stop</span><span style=color:#f92672>:</span>
  docker stop mdbook
</code></pre></div><p>Using my Docker image I can run <code>mdbook init</code> to create a new project.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker run --rm -v <span style=color:#66d9ef>$(</span>pwd<span style=color:#66d9ef>)</span>:/data -u <span style=color:#66d9ef>$(</span>id -u<span style=color:#66d9ef>)</span>:<span style=color:#66d9ef>$(</span>id -g<span style=color:#66d9ef>)</span> -it mdbook mdbook init
</code></pre></div><p>You can now fill out the <code>book.toml</code> file in the root of your project - you can <a href=https://github.com/mijndert/wiki/blob/main/book.toml>use mine</a> as a starting point if you want to. To view your new project just execute <code>make serve</code> to make it available on <a href=http://localohost:3000>http://localhost:3000</a>.</p><h2 id=github-actions>GitHub Actions</h2><p>To deploy your mdBook to GitHub Pages you can use a <a href=https://github.com/peaceiris/actions-mdbook>pre-built GitHub Action</a>. Make sure you add the <code>cname</code> option mentioned in the documentation to enable a custom domain.</p></article><section class=footer><p>The opinions on this site are my own. They do not necessarily represent those of my employer.</p><p>mijndert@mijndertstuij.nl</p></section></body></html>